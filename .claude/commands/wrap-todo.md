# /wrap-todo - 전날 작업 To-Do 불러오기

전날 `/wrap`으로 생성된 로그에서 To-Do 리스트를 불러오고, 백로그에서 승격 가능한 항목을 확인하여 오늘의 할일을 정리합니다.

---

## 실행 절차

### 1단계: 전날 wrap 로그 찾기

`docs/wrap-logs/` 디렉토리에서 가장 최근 날짜의 `.md` 파일을 찾습니다.

- 오늘 날짜 파일이 있으면 그 파일을 사용 (오늘 이미 wrap을 했다면 이전 날짜 사용)
- 파일이 없으면 "wrap 로그가 없습니다. `/wrap`을 먼저 실행하세요." 안내

### 2단계: To-Do 추출 및 정리

로그 파일에서 **마지막 세션의 "다음 작업 To-Do"** 섹션을 찾아 추출합니다.

- 여러 세션이 있을 경우 **가장 마지막 세션**의 To-Do가 최신 상태
- `- [ ]` (미완료)와 `- [x]` (완료) 항목을 구분
- P0/P1 항목만 포함됨 (P2는 백로그에서 관리)

### 3단계: 백로그 확인

`docs/backlog.md` 파일을 읽고 다음을 수행합니다:

#### P2a 블로킹 해제 확인
각 P2a 항목의 블로킹 조건이 충족되었는지 확인합니다:
- 관련 패키지 버전 확인 (`package.json`, 릴리즈 노트)
- 선행 작업 완료 여부 확인
- 파일/설정 존재 여부 확인

**조건 충족된 항목은 P1으로 승격하여 오늘의 할일에 포함합니다.**

#### P2b 참고 표시
백로그 항목 수를 요약하여 표시합니다 (개별 항목은 나열하지 않음).

### 4단계: 오늘의 할일 출력

추출한 To-Do를 아래 형식으로 정리하여 출력합니다:

```
## 오늘의 할일 (YYYY-MM-DD)

> 출처: docs/wrap-logs/YYYY-MM-DD.md (세션 N)

### P0 - 우선순위 높음
- [ ] 작업 내용 (관련 파일: path/to/file)

### P1 - 우선순위 보통
- [ ] 작업 내용

### P1 - 백로그에서 승격 (블로킹 해제)
- [ ] 작업 내용 (승격 사유: 조건 충족 설명)

---
총 N개 할일 (P0: n개, P1: n개)
백로그: P2a n개 대기 중, P2b n개 → docs/backlog.md
```

### 5단계: 작업 시작 제안

P0 항목이 있으면 첫 번째 P0 작업부터 시작할지 사용자에게 제안합니다.
P0이 없으면 P1 첫 번째 항목을 제안합니다.

```
첫 번째 작업으로 "[P0 작업명]"을 시작할까요?
```
